{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block javascript %}
    <script language="javascript" type="text/javascript" src="{% static 'core/js/issue_control.js' %}"></script>
{% endblock %}

{% block content %}

    {% include 'core/dialog/dialog_delete_issue_dossiers.html' %}

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-body">
                    <h4>
                        {% include 'core/stub/link_althingi_person.html' with person_xml_id=person.person_xml_id %}
                        <strong>{{ person }}</strong><br />
                        <small>({% trans 'b.' %} {{ person.birthdate }})</small>
                    </h4>
                    {% if person.email %}
                        <p>
                            {% trans 'Email address' %}:<br />
                            <a href="mailto:{{ person.email }}">{{ person.email }}</a>
                        </p>
                    {% endif %}
                    {% if person.facebook_url %}
                        <p>
                            {% trans 'Facebook page' %}:<br />
                            <a href="{{ person.facebook_url }}" target="_blank">{{ person.facebook_url }}</a>
                        </p>
                    {% endif %}
                    {% if person.youtube_url %}
                        <p>
                            {% trans 'YouTube channel' %}:<br />
                            <a href="{{ person.youtube_url }}" target="_blank">{{ person.youtube_url }}</a>
                        </p>
                    {% endif %}
                    {% if person.twitter_url %}
                        <p>
                            {% trans 'Twitter page' %}:<br />
                            <a href="{{ person.twitter_url }}" target="_blank">{{ person.twitter_url }}</a>
                        </p>
                    {% endif %}
                    {% if person.blog_url %}
                        <p>
                            {% trans 'Blog site' %}:<br />
                            <a href="{{ person.blog_url }}" target="_blank">{{ person.blog_url }}</a>
                        </p>
                    {% endif %}
                    {% if person.website_url %}
                        <p>
                            {% trans 'Website' %}:<br />
                            <a href="{{ person.website_url }}" target="_blank">{{ person.website_url }}</a>
                        </p>
                    {% endif %}
                </div>
            </div>

            <h3>{% trans 'Seats' %}</h3>
            <table class="table">
                <tr>
                    <th>{% trans 'Parliament' %}</th>
                    <th>{% trans 'Time period' %}</th>
                    <th>{% trans 'Party' %}</th>
                    <th>{% trans 'Seat type' %}</th>
                </tr>
                {% for seat in seats reversed %}
                    <tr>
                        <td>{{ seat.parliament.parliament_num }}</td>
                        <td>{{ seat.timing_in|date }} - {% if seat.timing_out %}{{ seat.timing_out|date }}{% else %}...{% endif %}</td>
                        <td>{{ seat.party }}</td>
                        <td>{{ seat.seat_type }}</td>
                    </tr>
                {% endfor %}
            </table>

            <h3>{% trans 'Committee Seats' %}</h3>
            <table class="table">
                <tr>
                    <th>{% trans 'Parliament' %}</th>
                    <th>{% trans 'Committee' %}</th>
                    <th>{% trans 'Time period' %}</th>
                    <th>{% trans 'Seat type' %}</th>
                </tr>
                {% for committee_seat in committee_seats reversed %}
                    <tr>
                        <td>{{ committee_seat.parliament.parliament_num }}</td>
                        <td><a href="{% url 'parliament_committee' committee_seat.parliament.parliament_num committee_seat.committee_id %}">{{ committee_seat.committee|capfirst }}</a></td>
                        <td>{{ committee_seat.timing_in|date }} - {% if committee_seat.timing_out %}{{ committee_seat.timing_out|date }}{% else %}...{% endif %}</td>
                        <td>{{ committee_seat.committee_seat_type }}</td>
                    </tr>
                {% endfor %}
            </table>

        </div>
        <div class="col-md-6">

            <h3>{% trans 'Issues' %}</h3>
            <table class="table">
                {% for issue in issues %}
                    {% ifchanged issue.parliament.parliament_num %}
                        <tr><th>{{ issue.parliament.parliament_num }}. {% trans 'parliament' %}</th></tr>
                    {% endifchanged %}
                    {% include 'core/stub/small/issue.html' %}
                {% empty %}
                    {% trans 'No issues found' %}
                {% endfor %}
            </table>

        </div>
    </div>


{% endblock %}
