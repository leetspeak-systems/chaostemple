{% load i18n %}
{% load dossier_tags %}

<div control="dossier-buttons" data-id="{{ dossier.id }}" data-user-id="{{ dossier.user_id }}">

    {% if dossier.document.doc_type|fieldstate_applicable:'knowledge' %}
    <span control="fieldstate-container">
        <label class="fieldname">{% trans 'Knowledge' %}:</label>
        <div class="btn-group" role="group">
            <button control="dropdown-fieldstate" data-id="{{ dossier.id }}" data-fieldname="knowledge" type="button"
                        {% if dossier.user != request.user %}disabled="disabled"{% endif %}
                        class="btn btn-default btn-sm dropdown-toggle btn-{% fieldstate_css 'knowledge' dossier.knowledge %}" data-toggle="dropdown">
                <span class="display">{{ dossier.get_knowledge_display }}</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                {% for knowledgestate in knowledgestates %}
                    <li {% if dossier.knowledge == knowledgestate.0 %}class="active"{% endif %}>
                        <a href="#"
                                control="set-fieldstate"
                                data-dossier-type="{{ dossier.dossier_type }}"
                                data-doc-num="{{ dossier.document.doc_num }}"
                                data-log-num="{{ dossier.review.log_num }}"
                                data-fieldname="knowledge"
                                data-fieldstate="{{ knowledgestate.0 }}">{{ knowledgestate.1 }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </span>
    {% endif %}

    {% if dossier.document.doc_type|fieldstate_applicable:'attention' %}
    <span control="fieldstate-container">
        <label class="fieldname">{% trans 'Attention' %}:</label>
        <div class="btn-group" role="group">
            <button control="dropdown-fieldstate" data-id="{{ dossier.id }}" data-fieldname="attention" type="button"
                        {% if dossier.user != request.user %}disabled="disabled"{% endif %}
                        class="btn btn-default btn-sm dropdown-toggle btn-{% fieldstate_css 'attention' dossier.attention %}" data-toggle="dropdown">
                <span class="display">{{ dossier.get_attention_display }}</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                {% for attentionstate in attentionstates %}
                    <li {% if dossier.attention == attentionstate.0 %}class="active"{% endif %}>
                        <a href="#"
                                control="set-fieldstate"
                                data-dossier-type="{{ dossier.dossier_type }}"
                                data-doc-num="{{ dossier.document.doc_num }}"
                                data-log-num="{{ dossier.review.log_num }}"
                                data-fieldname="attention"
                                data-fieldstate="{{ attentionstate.0 }}">{{ attentionstate.1 }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </span>
    {% endif %}

    {% if dossier.document.doc_type|fieldstate_applicable:'support' %}
    <span control="fieldstate-container">
        <label class="fieldname">{% trans 'Support' %}:</label>
        <div class="btn-group" role="group">
            <button control="dropdown-fieldstate" data-id="{{ dossier.id }}" data-fieldname="support" type="button"
                        {% if dossier.user != request.user %}disabled="disabled"{% endif %}
                        class="btn btn-default btn-sm dropdown-toggle btn-{% fieldstate_css 'support' dossier.support %}" data-toggle="dropdown">
                <span class="display">{{ dossier.get_support_display }}</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                {% for supportstate in supportstates %}
                    <li {% if dossier.support == supportstate.0 %}class="active"{% endif %}>
                        <a href="#"
                                control="set-fieldstate"
                                data-dossier-type="{{ dossier.dossier_type }}"
                                data-doc-num="{{ dossier.document.doc_num }}"
                                data-log-num="{{ dossier.review.log_num }}"
                                data-fieldname="support"
                                data-fieldstate="{{ supportstate.0 }}">{{ supportstate.1 }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </span>
    {% endif %}

    {% if dossier.document.doc_type|fieldstate_applicable:'proposal' %}
    <span control="fieldstate-container">
        <label class="fieldname">{% trans 'Proposals' %}:</label>
        <div class="btn-group" role="group">
            <button control="dropdown-fieldstate" data-id="{{ dossier.id }}" data-fieldname="proposal" type="button"
                        {% if dossier.user != request.user %}disabled="disabled"{% endif %}
                        class="btn btn-default btn-sm dropdown-toggle btn-{% fieldstate_css 'proposal' dossier.proposal %}" data-toggle="dropdown">
                <span class="display">{{ dossier.get_proposal_display }}</span>
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                {% for proposalstate in proposalstates %}
                    <li {% if dossier.proposal == proposalstate.0 %}class="active"{% endif %}>
                        <a href="#"
                                control="set-fieldstate"
                                data-dossier-type="{{ dossier.dossier_type }}"
                                data-doc-num="{{ dossier.document.doc_num }}"
                                data-log-num="{{ dossier.review.log_num }}"
                                data-fieldname="proposal"
                                data-fieldstate="{{ proposalstate.0 }}">{{ proposalstate.1 }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </span>
    {% endif %}

</div>
